<!DOCTYPE html>
<html lang="en">
<head><title>Holy Spirit Stocks</title></head>
  <body><p id="aapl">You own <span id="aapl-shares">0</span> shares of AAPL - Apple</p>
    <p>The price of AAPL is <span id="current-price"></span> dollars a share</p>
    <p>Your return is <span id="return"></span></p>
    <input id="aapl-buy">
    <button id="aapl-button-buy">Buy for <span id="aapl-price-buy"></span>$</button>
    <button id="aapl-button-sell">Sell for <span id="aapl-price-sell"></span>$</button>
  <!-- TradingView Widget BEGIN -->
  <div class="tradingview-widget-container">
  <div id="tradingview_7e18e"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/symbols/NASDAQ-AAPL/" rel="noopener" target="_blank"><span class="blue-text">AAPL chart</span></a> by TradingView</div>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
  new TradingView.widget( 
    {
     "width": 980,
     "height": 610,
     "symbol": "NASDAQ:AAPL",
     "interval": "D",
     "timezone": "Etc/UTC",
     "theme": "Light",
     "style": "1",
     "locale": "en",
     "toolbar_bg": "#f1f3f6",
     "enable_publishing": false,
     "allow_symbol_change": true,
     "container_id": "tradingview_7e18e"
  }
  );
  </script>
</div>
<!-- TradingView Widget END --></body>
  <script>
    var money = 100000;
    var aaplShares = 0;
    var aaplPrice = 10;
    var spent = 0;
    var input = document.getElementById("aapl-buy");
    var button = document.getElementById("aapl-button-buy");
    var button2 = document.getElementById("aapl-button-sell");
    var shares = document.getElementById("aapl-shares");
    var price = document.getElementById("aapl-price-buy");
    var price2 = document.getElementById("aapl-price-sell");
    var currentPrice = document.getElementById("current-price");
    function buyAapl(){
      if (money >= parseInt(input.value)*aaplPrice){
        money-=parseInt(input.value)*aaplPrice;
        price.innerHTML = parseInt(input.value)*aaplPrice;
        spent+=input.value*aaplPrice;
        aaplShares+=parseInt(input.value);
        shares.innerHTML = aaplShares;
        if (Math.random()<0.1){
          aaplPrice += 1;
          currentPrice.innerHTML = aaplPrice;
        } 
      } else {
        alert("Not enough money");
      }
    }
    function sellAapl(){
      if (aaplShares >= parseInt(input.value)){
        money+=parseInt(input.value)*aaplPrice;
        price2.innerHTML = parseInt(input.value)*aaplPrice;
        spent-=input.value*aaplPrice;
        aaplShares-=parseInt(input.value);
        shares.innerHTML = aaplShares;
        if (Math.random()<0.1){
         aaplPrice += 1;
         currentPrice.innerHTML = aaplPrice;
        }
      } else {
        alert("You don't have that many shares");
      }
      if (spent<0) {
        alert("Good investment");
      }
    }
    button2.addEventListener("click",sellAapl);
    button.addEventListener("click", buyAapl);
  </script>
</html>
